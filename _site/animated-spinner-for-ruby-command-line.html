<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Animated Spinner for Ruby Command Line</title>
  <meta name="description" content="Introduction">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/animated-spinner-for-ruby-command-line.html">
  <link rel="alternate" type="application/rss+xml" title="Krzysztof Maicher" href="http://localhost:4000/feed.xml" />
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-43848966-7', 'auto');
    ga('send', 'pageview');
  </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/"><img src="http://0.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11"/> Krzysztof Maicher</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Animated Spinner for Ruby Command Line</h1>
    <p class="post-meta">Nov 23, 2016 • Krzysztof Maicher • <i>ruby rubygems </i></p>
  </header>

  <article class="post-content">
    <h2 id="introduction">Introduction</h2>

<p>I wrote <a href="https://github.com/maicher/cli_spinnable">a gem</a> that enriches Ruby CLI by spinner.</p>

<h2 id="why">Why?</h2>

<p>Because existing solutions did not fit my use case.</p>

<p>I needed:</p>

<ul>
  <li>spinner</li>
  <li>tick mark (✓)</li>
  <li>fail mark (×)</li>
</ul>

<h2 id="use-case">Use case</h2>

<p>I was building a CLI script in Ruby, that downloads some data and then processes it.</p>

<p>There were few steps, each took few seconds to execute and could either fail or succeed.
I wanted to be able to mark them with a:</p>

<ul>
  <li>success mark (✓) when step succeed,</li>
  <li>or fail mark (×) followed by error message when step failed.</li>
</ul>

<h2 id="how">How?</h2>

<p>It’s written in pure Ruby, using:</p>

<ul>
  <li>asynchronous writing to <code class="highlighter-rouge">STDOUT</code> using <code class="highlighter-rouge">Thread</code> and <code class="highlighter-rouge">Queue</code></li>
  <li><code class="highlighter-rouge">Refine</code>/<code class="highlighter-rouge">Using</code> applied on <code class="highlighter-rouge">String</code> for adding colors to outputted text</li>
  <li><code class="highlighter-rouge">Enumerable#cycle</code> for infinitive spinner rotation</li>
  <li>rspec tests</li>
</ul>

<h2 id="how-to-use">How to use?</h2>

<p><strong>CliSpinnable</strong> gem doesn’t require any configuration.
It makes it easy to use, but in the same time it’s not very flexible and it will suit only specific use cases, such as described above.</p>

<p>It’s main feature is <code class="highlighter-rouge">CliSpinnable.with_spinner</code> method.</p>

<p>Call it with the block and then use <code class="highlighter-rouge">#print</code>, <code class="highlighter-rouge">#tick</code> and <code class="highlighter-rouge">#fail</code> methods:</p>

<script src="https://gist.github.com/maicher/eec6436a5e171e91108304736f943642.js"> </script>

<p>Can also be mixed-in to the class:</p>

<script src="https://gist.github.com/maicher/c5e09d6b088276a701fed47d0ca7fecd.js"> </script>

<h2 id="demo">Demo</h2>

<script src="https://gist.github.com/maicher/405a10faebfe31f9f2225805d15dc3f7.js"> </script>

<p><strong>Output:</strong></p>

<p><img src="https://raw.githubusercontent.com/maicher/cli_spinnable/master/examples/demo.gif" alt="demo.git" /></p>

<p>You can check out more examples <a href="https://github.com/maicher/cli_spinnable/tree/master/examples">here</a>.</p>

  </article>

  
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'maichergithubio';
    var disqus_identifier = '/animated-spinner-for-ruby-command-line';

    //Below here is identical to what Disqus supply as universal code.
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Krzysztof Maicher</li>
          <li><a href="mailto:krzysztof.maicher@gmail.com">krzysztof.maicher@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
            
            <li>
                <a target="_blank" href="https://github.com/maicher">
                    <i class="fa fa-github"></i> Github
                </a>
            </li>
            
            
            <li>
                <a target="_blank" href="https://twitter.com/kmaicher">
                    <i class="fa fa-twitter"></i> Twitter
                </a>
            </li>
            
            
            <li>
                <a target="_blank" href="https://pl.linkedin.com/in/maicher">
                    <i class="fa fa-linkedin"></i> Linkedin
                </a>
            </li>
            
            
            <li>
                <a target="_blank" href="https://stackoverflow.com/users/2933305/maicher">
                    <i class="fa fa-stack-overflow"></i> Stackoverflow
                </a>
            </li>
            

        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
